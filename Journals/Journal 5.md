Journal 5

This week I think I made a lot of development advances. I have the add location feature now taking the "actual" user location. I also got the arrow to move dynamically. I started by just getting the arrow to move 90 degrees to make sure I could rotate it and had the right function. I learned that it took in radians because when I just put in 90 it didn't turn the correct way. So, I made a function that converts from degrees to radians. 

Then I implemented a distance calculation I found online because that was one part I had no idea how to do. Then in the CLLocationDelegate extension I did some work to put the user location and selected location into that formula function and rotate the arrow. Since this extension was always printing location constantly, I didn't seem to need to do anything like set a time to check for location. I'm not sure why it checks so frequently, I have to look into that. After this work, the arrow pointed a set direction but didn't move after that since the test locations I can use in the debug simulation did not change drastically.

After this I ran into an issue I had not considered which is the way the user is facing. The stuff I had done to this point calculated a line between the two points but I realized if the user was facing a different way it would not pick that up and adjust. So, I looked into it and found that there is built in functionality to get the header orientation and check its updated orientation. I made a new function that held didUpdateHeading and in there I take the last user location and the selected user location and still put that into my distance formula. The new step was to take that answer and subtract the heading orientation as radians (since the location from the formula comes back as radians and we rotate by radians). Then I could transform the arrow by that radian answer.

The last thing I did was implement the app and run it on my iPhone. I verified it had my location rather than any of the pre set test locations and was able to select locations and as I moved my phone, watch the arrow adjust instantly. With this finally working, I think I have the basic functionality I planned for in the first few weeks and actually meet the deadline I had hoped to have it done by so I could try to look into the extra features with the remaining weeks.

One interesting error I ran into was I could see the printed coordinates of the location I chose on the simulation on my laptop, but running on my phone I could not. I added in breakpoints and it was functioning, so I added a background color and realized because my phone was in dark mode the text was white and hidden against my white app background. When I turned off dark mode, the text was black and appeared fine. This is something I could try to look into, to see if there is an xcode feature that checks for darkmode and I can print different text colors based on that.

Although it functions some things I still need to do are: enhance the UI since it works but could look better, add text to display the chosen location, comment my code, and rename variables to make the code more readable.